<%- include('partials/header1.ejs') %>

<!DOCTYPE html>
<html>
  <body>
    <header>
      <!-- navbar -->
      <%- include('partials/navbar-loggedout.ejs') %>
    </header>
    <section id="register-section" class="login-register">
      <div class="card register-card shadow">
        <h2 class="text-center mb-4">Create an Account</h2>

        <!-- add needs-validation + novalidate for custom feedback -->
        <form class="needs-validation" action="/register" method="POST" novalidate>
          <!-- USERNAME -->
          <div class="mb-3">
            <label class="form-label" for="username">Username</label>
            <input
              type="text"
              class="form-control"
              id="username"
              name="username"
              placeholder="e.g. john_doe"
              required
            />
            <div class="invalid-feedback">Username is required.</div>
          </div>

          <!-- EMAIL -->
          <div class="mb-3">
            <label class="form-label" for="email">Email address</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              placeholder="you@example.com"
              required
            />
            <div class="invalid-feedback">A valid email is required.</div>
          </div>

          <!-- PASSWORD -->
          <div class="mb-4">
            <label class="form-label" for="password">Password</label>
            <input
              type="password"
              class="form-control"
              id="password"
              name="password"
              placeholder="••••••••"
              minlength="8"
              required
            />
            <div class="invalid-feedback">Password (minimum 8 characters) is required.</div>
          </div>

          <button type="submit" class="btn btn-primary w-100">
            Sign Up
          </button>
        </form>
      </div>
    </section>

    <footer>
      <%- include('partials/footer1.ejs') %>
    </footer>

    <script>
      // Bootstrap‑style validation helper (works even without Bootstrap CSS)
      (function () {
        'use strict';
        const form = document.querySelector('.needs-validation');

        form.addEventListener('submit', function (e) {
          if (!form.checkValidity()) {
            e.preventDefault();            // stop submission
            e.stopPropagation();
          }
          form.classList.add('was-validated'); // triggers .invalid-feedback
        });
      })();
    </script>
  </body>
</html>